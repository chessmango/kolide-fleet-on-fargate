---
AWSTemplateFormatVersion: 2010-09-09
Description: KMS key for Kolide Fleet on Fargate
Resources:
  KMSKey:
    Type: AWS::KMS::Key
    Properties:
      EnableKeyRotation: true
      KeyPolicy:
        Version: 2012-10-17
        Statement:
        - Effect: Allow
          Principal:
            AWS: !Sub arn:aws:iam::${AWS::AccountId}:root
          Action: kms:*
          Resource: '*'


Outputs:
  KMSKey:
    Value: !Ref KMSKey
    Export:
      Name: Kolide-KMSKey